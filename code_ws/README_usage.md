# 人体检测与姿势识别系统使用说明

## 系统概述

本系统基于MediaPipe实现了完整的人体检测与姿势识别功能，包括：

1. **人形框定检测** - 自动识别并框选出图像中的人体
2. **骨骼关键点识别** - 实时检测人体33个关键点位置  
3. **姿势识别** - 识别常见的手势和身体姿态

## 文件说明

### 主要文件
- `human_detection_system.py` - 完整的图形化界面系统
- `simple_demo.py` - 简化版本，适合快速测试
- `requirements.txt` - 依赖包列表
- `README_usage.md` - 本使用说明

### 现有演示文件
- `camera_demo.py` - 基础摄像头测试
- `hand_demo.py` - 手部检测演示

## 环境配置

### 1. 安装依赖包

```bash
pip install -r requirements.txt
```

或手动安装：
```bash
pip install opencv-python mediapipe numpy pillow
```

### 2. 检查摄像头权限

确保Python有权限访问摄像头：
- Windows: 检查隐私设置 → 摄像头权限
- 确保摄像头未被其他程序占用

## 使用方法

### 方式一：完整图形界面系统

```bash
python human_detection_system.py
```

**功能特点：**
- 图形化操作界面
- 三种检测模式切换
- 实时姿势识别显示
- 可视化控制按钮

**操作说明：**
1. 选择检测模式：
   - 骨骼点检测：显示人体关键点和连接线
   - 全身检测：包含面部、手部、身体全部关键点
   - 姿势识别：识别并显示当前姿势
2. 点击"开始检测"启动摄像头
3. 点击"停止检测"暂停检测
4. 点击"退出"关闭程序

### 方式二：简化版本演示

```bash
python simple_demo.py
```

**功能特点：**
- 轻量级实现
- 实时性能更好
- 键盘快捷键控制

**按键说明：**
- `q` - 退出程序
- `空格` - 暂停/继续检测
- `s` - 截图保存

## 支持的姿势识别

系统目前可识别以下姿势：

1. **正常站立** 🧍 - 双手自然下垂
2. **左手举起** ✋ - 左手高于肩膀
3. **右手举起** ✋ - 右手高于肩膀  
4. **双手举起** 🙌 - 双手同时高于肩膀
5. **双臂展开** 🤸 - 双臂水平展开
6. **挥手动作** 👋 - 检测手部快速移动

## 技术参数

### MediaPipe配置
- 模型复杂度：1 (平衡精度和速度)
- 检测置信度：0.5
- 追踪置信度：0.5
- 平滑处理：开启

### 摄像头设置
- 分辨率：640x480
- 帧率：30FPS
- 镜像模式：开启

### 关键点说明
系统使用MediaPipe Pose模型，检测33个身体关键点：
- 面部：鼻子、眼部、耳部 (5个点)
- 上身：肩膀、肘部、手腕 (6个点)
- 躯干：胸部、腹部 (2个点)
- 下身：髋部、膝盖、脚踝、脚部 (20个点)

## 常见问题解决

### 1. 摄像头无法打开
- 检查摄像头是否被其他程序占用
- 确认系统摄像头权限设置
- 尝试更换摄像头索引 (0, 1, 2...)

### 2. 检测精度不够
- 保证充足的光线条件
- 保持合适的距离 (1.5-3米)
- 避免复杂背景干扰
- 穿着对比度较高的衣物

### 3. 程序运行缓慢
- 降低模型复杂度
- 减少检测帧率
- 关闭不必要的其他程序

### 4. 姿势识别不准确
- 动作保持1-2秒以上
- 确保关键点可见
- 避免身体被遮挡

## 扩展开发

### 添加新姿势识别

1. 在 `recognize_gesture()` 函数中添加新的判断逻辑
2. 基于关键点坐标计算角度和位置关系
3. 设定合适的阈值参数

### 优化建议

1. **性能优化**：
   - 使用多线程分离UI和检测
   - 采用帧跳跃减少计算量
   - 优化图像预处理流程

2. **功能扩展**：
   - 添加手势控制功能
   - 实现动作序列识别
   - 支持多人检测

3. **界面改进**：
   - 添加参数调节滑块
   - 实现检测结果保存
   - 增加统计信息显示

## 系统架构

```
HumanDetectionSystem
├── MediaPipe初始化
├── 摄像头管理
├── 图像处理
│   ├── 人体框定
│   ├── 关键点检测
│   └── 姿势识别
├── GUI界面
│   ├── 控制面板
│   ├── 视频显示
│   └── 信息展示
└── 事件处理
```

## 更新日志

### v1.0 (当前版本)
- 实现基础人体检测功能
- 支持33个关键点识别
- 添加6种基础姿势识别
- 提供图形化操作界面
- 支持实时视频处理

### 后续计划
- 增加更多姿势类型
- 优化检测精度
- 添加录制保存功能
- 支持多人同时检测
- 与无人机控制集成

## 联系支持

如有问题或建议，请联系开发团队。
